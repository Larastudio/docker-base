---

- name: Create a login user
    hosts: all
    remote_user: root
    user:
    name: "{{web_user}}"
    # # a hash created with: mkpasswd `gem install mkpasswd` and "mkpasswd -m sha-512 "password" | sed 's/\$/\\$/g'
    password: "{{ upassword | password_hash('sha512') }}"
    groups: # Empty by default, here we give it some groups
    - docker
    - sudo
    state: present
    shell: /bin/bash       # Defaults to /bin/bash
    system: no             # Defaults to no
    createhome: yes        # Defaults to yes
    home: /home/web  # Defaults to /home/<username>
    authorized_key: 
        user: "{{web_user}}"
        key: "{{github_keys}}"

- name: Add Web User, Install Docker, Docker Compose
  roles:
    - geerlingguy.docker
    - weareinteractive.ufw